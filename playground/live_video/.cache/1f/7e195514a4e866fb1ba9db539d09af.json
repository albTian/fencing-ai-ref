{"id":"DAMt","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/pool_gpu.js.map","includedInParent":true,"mtime":1631991247369},{"name":"/Users/alberttian/f21/playground/frontend/live_video/package.json","includedInParent":true,"mtime":1633056435183},{"name":"/Users/alberttian/f21/playground/frontend/live_video/.babelrc","includedInParent":true,"mtime":1633056216691},{"name":"/Users/alberttian/f21/playground/frontend/live_video/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":1631991247369}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Pool3DProgram=exports.Pool2DProgram=void 0;class n{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=[\"x\"],\"avg\"===e&&t)throw new Error(\"Cannot compute positions for average pool.\");const o=n.filterWidth,x=n.strideHeight,r=n.strideWidth,c=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,s=n.effectiveFilterWidth,C=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;const $=\"avg\"===e,h=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`;let f=\"0.0\";if($||(f=\"-1.0 / 1e-20\"),t){const e=\">=\";return void(this.userCode=`\\n        const ivec2 strides = ivec2(${x}, ${r});\\n        const ivec2 pads = ivec2(${C}, ${d});\\n\\n        void main() {\\n          ivec4 coords = getOutputCoords();\\n          int batch = coords[0];\\n          int d = coords[3];\\n\\n          ivec2 xRCCorner = coords.yz * strides - pads;\\n          int xRCorner = xRCCorner.x;\\n          int xCCorner = xRCCorner.y;\\n\\n          // max/min x(?, ?, d) to get y(yR, yC, d).\\n          // ? = to be determined\\n          float minMaxValue = 0.0;\\n          float minMaxValueFound = 0.0;\\n          int minMaxPosition = 0;\\n          float avgValue = 0.0;\\n\\n          for (int wR = 0; wR < ${u};\\n              wR += ${c}) {\\n            int xR = xRCorner + wR;\\n\\n            if (xR < 0 || xR >= ${n.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < ${s};\\n                wC += ${l}) {\\n              int xC = xCCorner + wC;\\n\\n              if (xC < 0 || xC >= ${n.inWidth}) {\\n                continue;\\n              }\\n\\n              float value = getX(batch, xR, xC, d);\\n\\n              // If a min / max value has already been found, use it. If not,\\n              // use the current value.\\n              float currMinMaxValue = mix(\\n                  value, minMaxValue, minMaxValueFound);\\n              if (value ${e} currMinMaxValue) {\\n                minMaxValue = value;\\n                minMaxValueFound = 1.0;\\n                minMaxPosition = ${i?a?h:v:`wR * ${s} + wC`};\\n              }\\n            }\\n          }\\n          setOutput(float(minMaxPosition));\\n        }\\n      `)}let R=`${e}(${e}(${e}(`+\"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])\";\"avg\"===e&&(R=\"avgValue / count\");const V=4*Math.floor(o/4),g=o%4,m=`\\n      if (${$}) {\\n        avgValue += dot(values, ones);\\n      } else {\\n        minMaxValue = max(values, minMaxValue);\\n      }\\n    `;this.userCode=`\\n      const ivec2 strides = ivec2(${x}, ${r});\\n      const ivec2 pads = ivec2(${C}, ${d});\\n      const float initializationValue = ${f};\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float count = 0.0;\\n\\n      float getValue(int batch, int xR, int xC, int d) {\\n        if (xC < 0 || xC >= ${n.inWidth}) {\\n          return initializationValue;\\n        }\\n        count += 1.0;\\n        return getX(batch, xR, xC, d);\\n      }\\n\\n      void main() {\\n        ivec4 coords = getOutputCoords();\\n        int batch = coords[0];\\n        int d = coords[3];\\n\\n        ivec2 xRCCorner = coords.yz * strides - pads;\\n        int xRCorner = xRCCorner.x;\\n        int xCCorner = xRCCorner.y;\\n\\n        // max/min x(?, ?, d) to get y(yR, yC, d).\\n        // ? = to be determined\\n        vec4 minMaxValue = vec4(${f});\\n        float avgValue = 0.0;\\n        count = 0.0;\\n\\n        for (int wR = 0; wR < ${u};\\n            wR += ${c}) {\\n          int xR = xRCorner + wR;\\n\\n          if (xR < 0 || xR >= ${n.inHeight}) {\\n            continue;\\n          }\\n\\n          for (int wC = 0; wC < ${V}; wC += 4) {\\n            int xC = xCCorner + wC * ${l};\\n\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${l}, d),\\n              getValue(batch, xR, xC + 2 * ${l}, d),\\n              getValue(batch, xR, xC + 3 * ${l}, d)\\n            );\\n\\n            ${m}\\n          }\\n\\n          int xC = xCCorner + ${V};\\n          if (${1===g}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              initializationValue,\\n              initializationValue,\\n              initializationValue\\n            );\\n\\n            ${m}\\n          } else if (${2===g}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${l}, d),\\n              initializationValue,\\n              initializationValue\\n            );\\n\\n            ${m}\\n          } else if (${3===g}) {\\n            vec4 values = vec4(\\n              getValue(batch, xR, xC, d),\\n              getValue(batch, xR, xC + ${l}, d),\\n              getValue(batch, xR, xC + 2 * ${l}, d),\\n              initializationValue\\n            );\\n\\n            ${m}\\n          }\\n        }\\n        setOutput(${R});\\n      }\\n    `}}exports.Pool2DProgram=n;class e{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=[\"x\"],\"avg\"===e&&t)throw new Error(\"Cannot compute positions for average pool.\");const o=n.filterWidth,x=n.strideDepth,r=n.strideHeight,c=n.strideWidth,l=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,C=n.effectiveFilterDepth,d=n.effectiveFilterHeight,$=n.effectiveFilterWidth,h=n.padInfo.front,v=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;const R=\"avg\"===e;let V=\"0.0\";if(R||(V=\"-1.0 / 1e-20\"),t){const e=\">=\";return void(this.userCode=`\\n        const ivec3 strides =\\n            ivec3(${x}, ${r}, ${c});\\n        const ivec3 pads = ivec3(${h}, ${v}, ${f});\\n\\n        void main() {\\n          ivec5 coords = getOutputCoords();\\n          int batch = coords.x;\\n          int ch = coords.u;\\n\\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\\n          int xDCorner = xCorner.x;\\n          int xRCorner = xCorner.y;\\n          int xCCorner = xCorner.z;\\n\\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\\n          // ? = to be determined\\n          float minMaxValue = 0.0;\\n          float minMaxValueFound = 0.0;\\n          int minMaxPosition = 0;\\n\\n          for (int wD = 0; wD < ${C};\\n              wD += ${l}) {\\n            int xD = xDCorner + wD;\\n\\n            if (xD < 0 || xD >= ${n.inDepth}) {\\n              continue;\\n            }\\n\\n            for (int wR = 0; wR < ${d};\\n                wR += ${u}) {\\n              int xR = xRCorner + wR;\\n\\n              if (xR < 0 || xR >= ${n.inHeight}) {\\n                continue;\\n              }\\n\\n              for (int wC = 0; wC < ${$};\\n                  wC += ${s}) {\\n                int xC = xCCorner + wC;\\n\\n                if (xC < 0 || xC >= ${n.inWidth}) {\\n                  continue;\\n                }\\n\\n                float value = getX(batch, xD, xR, xC, ch);\\n\\n                // If a min / max value has already been found, use it. If not,\\n                // use the current value.\\n                float currMinMaxValue = mix(\\n                    value, minMaxValue, minMaxValueFound);\\n                if (value ${e} currMinMaxValue) {\\n                  minMaxValue = value;\\n                  minMaxValueFound = 1.0;\\n                  minMaxPosition = ${i?a?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${d} * ${$} +\\n                      wR * ${$} + wC`};\\n                }\\n              }\\n            }\\n          }\\n          setOutput(float(minMaxPosition));\\n        }\\n      `)}let g=`${e}(${e}(${e}(`+\"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])\";\"avg\"===e&&(g=\"avgValue / count\");const m=4*Math.floor(o/4),w=o%4,p=`\\n      if (${R}) {\\n        avgValue += dot(values, ones);\\n      } else {\\n        minMaxValue = max(values, minMaxValue);\\n      }\\n    `;this.userCode=`\\n      const ivec3 strides =\\n        ivec3(${x}, ${r}, ${c});\\n      const ivec3 pads = ivec3(${h}, ${v}, ${f});\\n      const float initializationValue = ${V};\\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\\n\\n      float count = 0.0;\\n\\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\\n        if (xC < 0 || xC >= ${n.inWidth}) {\\n          return initializationValue;\\n        }\\n        count += 1.0;\\n        return getX(batch, xD, xR, xC, ch);\\n      }\\n\\n      void main() {\\n        ivec5 coords = getOutputCoords();\\n        int batch = coords.x;\\n        int ch = coords.u;\\n\\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\\n        int xDCorner = xCorner.x;\\n        int xRCorner = xCorner.y;\\n        int xCCorner = xCorner.z;\\n\\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\\n        // ? = to be determined\\n        vec4 minMaxValue = vec4(${V});\\n        float avgValue = 0.0;\\n        count = 0.0;\\n\\n        for (int wD = 0; wD < ${C};\\n            wD += ${l}) {\\n          int xD = xDCorner + wD;\\n\\n          if (xD < 0 || xD >= ${n.inDepth}) {\\n            continue;\\n          }\\n\\n          for (int wR = 0; wR < ${d};\\n            wR += ${u}) {\\n            int xR = xRCorner + wR;\\n\\n            if (xR < 0 || xR >= ${n.inHeight}) {\\n              continue;\\n            }\\n\\n            for (int wC = 0; wC < ${m}; wC += 4) {\\n              int xC = xCCorner + wC * ${s};\\n\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${s}, ch),\\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\\n                getValue(batch, xD, xR, xC + 3 * ${s}, ch)\\n              );\\n\\n              ${p}\\n            }\\n\\n            int xC = xCCorner + ${m};\\n            if (${1===w}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                initializationValue,\\n                initializationValue,\\n                initializationValue\\n              );\\n\\n              ${p}\\n            } else if (${2===w}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${s}, ch),\\n                initializationValue,\\n                initializationValue\\n              );\\n\\n              ${p}\\n            } else if (${3===w}) {\\n              vec4 values = vec4(\\n                getValue(batch, xD, xR, xC, ch),\\n                getValue(batch, xD, xR, xC + ${s}, ch),\\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\\n                initializationValue\\n              );\\n\\n              ${p}\\n            }\\n          }\\n          setOutput(${g});\\n        }\\n      }\\n    `}}exports.Pool3DProgram=e;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":0}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":13}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":20}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":35}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":43}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":56}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":57}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":64}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":68}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":76}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":90}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":98}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":117}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":119}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":1,"column":125}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":127}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":27,"column":6},"generated":{"line":1,"column":139}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":27,"column":41},"generated":{"line":1,"column":141}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":143}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":28,"column":33},"generated":{"line":1,"column":145}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":28,"column":52},"generated":{"line":1,"column":148}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":150}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":29,"column":28},"generated":{"line":1,"column":153}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":156}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":159}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":164}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":22,"column":18},"generated":{"line":1,"column":178}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":1,"column":179}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":30,"column":21},"generated":{"line":1,"column":184}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":192}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":30,"column":30},"generated":{"line":1,"column":195}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":197}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":203}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":207}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":1,"column":213}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":1,"column":259}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":1,"column":265}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":34,"column":24},"generated":{"line":1,"column":267}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":34,"column":33},"generated":{"line":1,"column":269}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":281}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":1,"column":283}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":35,"column":34},"generated":{"line":1,"column":285}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":298}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":36,"column":24},"generated":{"line":1,"column":300}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":36,"column":33},"generated":{"line":1,"column":302}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":37,"column":10},"generated":{"line":1,"column":314}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":37,"column":27},"generated":{"line":1,"column":316}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":37,"column":36},"generated":{"line":1,"column":318}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":333}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":335}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":38,"column":35},"generated":{"line":1,"column":337}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":351}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":39,"column":34},"generated":{"line":1,"column":353}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":39,"column":43},"generated":{"line":1,"column":355}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":377}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":40,"column":33},"generated":{"line":1,"column":379}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":40,"column":42},"generated":{"line":1,"column":381}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":402}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":42,"column":19},"generated":{"line":1,"column":404}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":42,"column":28},"generated":{"line":1,"column":406}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":42,"column":36},"generated":{"line":1,"column":414}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":43,"column":10},"generated":{"line":1,"column":418}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":420}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":422}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":43,"column":37},"generated":{"line":1,"column":430}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":44,"column":9},"generated":{"line":1,"column":435}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":44,"column":9},"generated":{"line":1,"column":440}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":1,"column":452}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":44,"column":32},"generated":{"line":1,"column":454}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":463}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":469}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":46,"column":35},"generated":{"line":1,"column":471}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":1,"column":479}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":1,"column":481}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":47,"column":50},"generated":{"line":1,"column":497}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":47,"column":59},"generated":{"line":1,"column":499}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":48,"column":8},"generated":{"line":1,"column":519}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":1,"column":521}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":48,"column":36},"generated":{"line":1,"column":540}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":48,"column":45},"generated":{"line":1,"column":542}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":559}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":1,"column":570}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":572}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":50,"column":45},"generated":{"line":1,"column":591}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":50,"column":54},"generated":{"line":1,"column":593}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":610}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":614}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":1,"column":616}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":622}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":53,"column":9},"generated":{"line":1,"column":625}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":629}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":55,"column":28},"generated":{"line":1,"column":631}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":647}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":58,"column":26},"generated":{"line":1,"column":649}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":59,"column":12},"generated":{"line":1,"column":650}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":59,"column":12},"generated":{"line":1,"column":656}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":1,"column":658}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":116,"column":6},"generated":{"line":1,"column":663}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":675}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":680}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":62,"column":38},"generated":{"line":1,"column":730}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":62,"column":55},"generated":{"line":1,"column":736}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":777}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":63,"column":46},"generated":{"line":1,"column":783}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":81,"column":34},"generated":{"line":1,"column":1332}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":82,"column":22},"generated":{"line":1,"column":1359}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":85,"column":34},"generated":{"line":1,"column":1439}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":85,"column":43},"generated":{"line":1,"column":1441}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":89,"column":36},"generated":{"line":1,"column":1533}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":90,"column":24},"generated":{"line":1,"column":1562}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":93,"column":36},"generated":{"line":1,"column":1646}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":93,"column":45},"generated":{"line":1,"column":1648}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":103,"column":26},"generated":{"line":1,"column":2010}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":1,"column":2147}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":107,"column":30},"generated":{"line":1,"column":2149}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":107,"column":52},"generated":{"line":1,"column":2151}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":108,"column":52},"generated":{"line":1,"column":2153}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":109,"column":37},"generated":{"line":1,"column":2163}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":121,"column":8},"generated":{"line":1,"column":2285}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":121,"column":8},"generated":{"line":1,"column":2289}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":121,"column":25},"generated":{"line":1,"column":2294}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":121,"column":37},"generated":{"line":1,"column":2299}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":121,"column":49},"generated":{"line":1,"column":2304}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":122,"column":8},"generated":{"line":1,"column":2309}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":123,"column":21},"generated":{"line":1,"column":2377}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":123,"column":8},"generated":{"line":1,"column":2385}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":124,"column":6},"generated":{"line":1,"column":2389}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":124,"column":20},"generated":{"line":1,"column":2391}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":10},"generated":{"line":1,"column":2411}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":10},"generated":{"line":1,"column":2417}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":65},"generated":{"line":1,"column":2419}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":35},"generated":{"line":1,"column":2421}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":40},"generated":{"line":1,"column":2426}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":46},"generated":{"line":1,"column":2432}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":127,"column":60},"generated":{"line":1,"column":2434}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":128,"column":10},"generated":{"line":1,"column":2437}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":128,"column":37},"generated":{"line":1,"column":2439}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":128,"column":51},"generated":{"line":1,"column":2441}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":130,"column":10},"generated":{"line":1,"column":2443}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":131,"column":12},"generated":{"line":1,"column":2460}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":138,"column":9},"generated":{"line":1,"column":2587}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":138,"column":9},"generated":{"line":1,"column":2592}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":139,"column":36},"generated":{"line":1,"column":2640}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":139,"column":53},"generated":{"line":1,"column":2646}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":140,"column":33},"generated":{"line":1,"column":2685}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":140,"column":44},"generated":{"line":1,"column":2691}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":141,"column":42},"generated":{"line":1,"column":2739}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":147,"column":30},"generated":{"line":1,"column":2913}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":147,"column":39},"generated":{"line":1,"column":2915}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":165,"column":34},"generated":{"line":1,"column":3428}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":169,"column":32},"generated":{"line":1,"column":3521}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":170,"column":20},"generated":{"line":1,"column":3546}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":173,"column":32},"generated":{"line":1,"column":3622}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":173,"column":41},"generated":{"line":1,"column":3624}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":177,"column":34},"generated":{"line":1,"column":3710}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":178,"column":39},"generated":{"line":1,"column":3765}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":182,"column":41},"generated":{"line":1,"column":3889}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":183,"column":45},"generated":{"line":1,"column":3943}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":184,"column":45},"generated":{"line":1,"column":3997}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":187,"column":14},"generated":{"line":1,"column":4037}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":190,"column":32},"generated":{"line":1,"column":4088}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":191,"column":45},"generated":{"line":1,"column":4109}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":191,"column":16},"generated":{"line":1,"column":4113}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":199,"column":14},"generated":{"line":1,"column":4335}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":200,"column":52},"generated":{"line":1,"column":4362}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":200,"column":23},"generated":{"line":1,"column":4366}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":203,"column":41},"generated":{"line":1,"column":4490}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":208,"column":14},"generated":{"line":1,"column":4602}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":209,"column":52},"generated":{"line":1,"column":4629}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":209,"column":23},"generated":{"line":1,"column":4633}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":212,"column":41},"generated":{"line":1,"column":4757}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":213,"column":45},"generated":{"line":1,"column":4811}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":217,"column":14},"generated":{"line":1,"column":4887}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":220,"column":20},"generated":{"line":1,"column":4935}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":4957}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":4965}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":4979}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":6},"generated":{"line":1,"column":4981}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":13},"generated":{"line":1,"column":4987}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":231,"column":2},"generated":{"line":1,"column":4989}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":232,"column":6},"generated":{"line":1,"column":5001}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":232,"column":41},"generated":{"line":1,"column":5003}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":233,"column":6},"generated":{"line":1,"column":5005}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":233,"column":33},"generated":{"line":1,"column":5007}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":233,"column":52},"generated":{"line":1,"column":5010}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":234,"column":6},"generated":{"line":1,"column":5012}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":234,"column":28},"generated":{"line":1,"column":5015}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":235,"column":8},"generated":{"line":1,"column":5018}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":227,"column":2},"generated":{"line":1,"column":5021}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":227,"column":2},"generated":{"line":1,"column":5026}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":227,"column":18},"generated":{"line":1,"column":5040}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":227,"column":19},"generated":{"line":1,"column":5041}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":235,"column":21},"generated":{"line":1,"column":5046}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":235,"column":8},"generated":{"line":1,"column":5054}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":235,"column":30},"generated":{"line":1,"column":5057}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":5059}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":236,"column":12},"generated":{"line":1,"column":5065}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":236,"column":16},"generated":{"line":1,"column":5069}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":236,"column":22},"generated":{"line":1,"column":5075}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":239,"column":10},"generated":{"line":1,"column":5121}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":239,"column":10},"generated":{"line":1,"column":5127}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":239,"column":24},"generated":{"line":1,"column":5129}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":239,"column":33},"generated":{"line":1,"column":5131}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":240,"column":10},"generated":{"line":1,"column":5143}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":240,"column":24},"generated":{"line":1,"column":5145}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":240,"column":33},"generated":{"line":1,"column":5147}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":241,"column":10},"generated":{"line":1,"column":5159}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":241,"column":25},"generated":{"line":1,"column":5161}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":241,"column":34},"generated":{"line":1,"column":5163}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":242,"column":10},"generated":{"line":1,"column":5176}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":242,"column":24},"generated":{"line":1,"column":5178}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":242,"column":33},"generated":{"line":1,"column":5180}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":243,"column":10},"generated":{"line":1,"column":5192}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":243,"column":26},"generated":{"line":1,"column":5194}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":243,"column":35},"generated":{"line":1,"column":5196}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":244,"column":10},"generated":{"line":1,"column":5210}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":244,"column":27},"generated":{"line":1,"column":5212}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":244,"column":36},"generated":{"line":1,"column":5214}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":245,"column":10},"generated":{"line":1,"column":5229}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":245,"column":26},"generated":{"line":1,"column":5231}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":245,"column":35},"generated":{"line":1,"column":5233}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":246,"column":10},"generated":{"line":1,"column":5247}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":246,"column":33},"generated":{"line":1,"column":5249}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":246,"column":42},"generated":{"line":1,"column":5251}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":247,"column":10},"generated":{"line":1,"column":5272}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":247,"column":34},"generated":{"line":1,"column":5274}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":247,"column":43},"generated":{"line":1,"column":5276}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":248,"column":10},"generated":{"line":1,"column":5298}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":248,"column":33},"generated":{"line":1,"column":5300}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":248,"column":42},"generated":{"line":1,"column":5302}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":250,"column":10},"generated":{"line":1,"column":5323}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":250,"column":21},"generated":{"line":1,"column":5325}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":250,"column":30},"generated":{"line":1,"column":5327}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":250,"column":38},"generated":{"line":1,"column":5335}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":251,"column":10},"generated":{"line":1,"column":5341}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":251,"column":19},"generated":{"line":1,"column":5343}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":251,"column":28},"generated":{"line":1,"column":5345}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":251,"column":36},"generated":{"line":1,"column":5353}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":252,"column":10},"generated":{"line":1,"column":5357}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":252,"column":20},"generated":{"line":1,"column":5359}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":252,"column":29},"generated":{"line":1,"column":5361}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":252,"column":37},"generated":{"line":1,"column":5369}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":253,"column":9},"generated":{"line":1,"column":5374}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":253,"column":9},"generated":{"line":1,"column":5379}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":253,"column":23},"generated":{"line":1,"column":5391}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":253,"column":32},"generated":{"line":1,"column":5393}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":255,"column":10},"generated":{"line":1,"column":5402}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":255,"column":10},"generated":{"line":1,"column":5408}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":255,"column":35},"generated":{"line":1,"column":5410}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":255,"column":22},"generated":{"line":1,"column":5418}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":257,"column":8},"generated":{"line":1,"column":5420}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":257,"column":8},"generated":{"line":1,"column":5424}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":257,"column":30},"generated":{"line":1,"column":5426}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":263,"column":8},"generated":{"line":1,"column":5432}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":258,"column":9},"generated":{"line":1,"column":5435}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":260,"column":6},"generated":{"line":1,"column":5439}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":260,"column":28},"generated":{"line":1,"column":5441}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":263,"column":8},"generated":{"line":1,"column":5457}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":263,"column":26},"generated":{"line":1,"column":5459}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":264,"column":12},"generated":{"line":1,"column":5460}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":264,"column":12},"generated":{"line":1,"column":5466}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":264,"column":24},"generated":{"line":1,"column":5468}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":337,"column":6},"generated":{"line":1,"column":5473}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":266,"column":11},"generated":{"line":1,"column":5485}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":266,"column":11},"generated":{"line":1,"column":5490}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":268,"column":20},"generated":{"line":1,"column":5553}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":268,"column":36},"generated":{"line":1,"column":5559}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":268,"column":53},"generated":{"line":1,"column":5565}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":269,"column":35},"generated":{"line":1,"column":5606}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":269,"column":48},"generated":{"line":1,"column":5612}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":269,"column":59},"generated":{"line":1,"column":5618}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":287,"column":34},"generated":{"line":1,"column":6199}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":288,"column":22},"generated":{"line":1,"column":6226}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":291,"column":34},"generated":{"line":1,"column":6306}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":291,"column":43},"generated":{"line":1,"column":6308}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":295,"column":36},"generated":{"line":1,"column":6399}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":296,"column":24},"generated":{"line":1,"column":6428}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":299,"column":36},"generated":{"line":1,"column":6512}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":299,"column":45},"generated":{"line":1,"column":6514}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":303,"column":38},"generated":{"line":1,"column":6612}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":304,"column":26},"generated":{"line":1,"column":6643}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":307,"column":38},"generated":{"line":1,"column":6731}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":307,"column":47},"generated":{"line":1,"column":6733}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":317,"column":28},"generated":{"line":1,"column":7116}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":321,"column":10},"generated":{"line":1,"column":7259}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":322,"column":15},"generated":{"line":1,"column":7261}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":323,"column":33},"generated":{"line":1,"column":7277}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":323,"column":42},"generated":{"line":1,"column":7279}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":324,"column":23},"generated":{"line":1,"column":7298}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":324,"column":32},"generated":{"line":1,"column":7300}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":324,"column":52},"generated":{"line":1,"column":7320}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":324,"column":61},"generated":{"line":1,"column":7322}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":325,"column":23},"generated":{"line":1,"column":7341}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":325,"column":32},"generated":{"line":1,"column":7343}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":326,"column":29},"generated":{"line":1,"column":7371}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":326,"column":38},"generated":{"line":1,"column":7373}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":327,"column":23},"generated":{"line":1,"column":7393}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":327,"column":32},"generated":{"line":1,"column":7395}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":327,"column":51},"generated":{"line":1,"column":7414}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":327,"column":60},"generated":{"line":1,"column":7416}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":328,"column":22},"generated":{"line":1,"column":7442}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":328,"column":49},"generated":{"line":1,"column":7449}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":329,"column":29},"generated":{"line":1,"column":7484}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":342,"column":8},"generated":{"line":1,"column":7625}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":342,"column":8},"generated":{"line":1,"column":7629}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":342,"column":25},"generated":{"line":1,"column":7634}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":342,"column":37},"generated":{"line":1,"column":7639}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":342,"column":49},"generated":{"line":1,"column":7644}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":343,"column":8},"generated":{"line":1,"column":7649}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":344,"column":21},"generated":{"line":1,"column":7717}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":344,"column":8},"generated":{"line":1,"column":7725}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":345,"column":6},"generated":{"line":1,"column":7729}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":345,"column":20},"generated":{"line":1,"column":7731}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":10},"generated":{"line":1,"column":7751}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":10},"generated":{"line":1,"column":7757}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":65},"generated":{"line":1,"column":7759}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":35},"generated":{"line":1,"column":7761}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":40},"generated":{"line":1,"column":7766}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":46},"generated":{"line":1,"column":7772}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":348,"column":60},"generated":{"line":1,"column":7774}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":349,"column":10},"generated":{"line":1,"column":7777}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":349,"column":37},"generated":{"line":1,"column":7779}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":349,"column":51},"generated":{"line":1,"column":7781}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":351,"column":10},"generated":{"line":1,"column":7783}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":352,"column":12},"generated":{"line":1,"column":7800}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":359,"column":9},"generated":{"line":1,"column":7927}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":359,"column":9},"generated":{"line":1,"column":7932}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":361,"column":16},"generated":{"line":1,"column":7989}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":361,"column":32},"generated":{"line":1,"column":7995}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":361,"column":49},"generated":{"line":1,"column":8001}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":362,"column":33},"generated":{"line":1,"column":8040}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":362,"column":46},"generated":{"line":1,"column":8046}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":362,"column":57},"generated":{"line":1,"column":8052}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":363,"column":42},"generated":{"line":1,"column":8100}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":369,"column":30},"generated":{"line":1,"column":8283}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":369,"column":39},"generated":{"line":1,"column":8285}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":388,"column":34},"generated":{"line":1,"column":8865}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":392,"column":32},"generated":{"line":1,"column":8958}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":393,"column":20},"generated":{"line":1,"column":8983}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":396,"column":32},"generated":{"line":1,"column":9059}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":396,"column":41},"generated":{"line":1,"column":9061}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":400,"column":34},"generated":{"line":1,"column":9146}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":401,"column":20},"generated":{"line":1,"column":9171}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":404,"column":34},"generated":{"line":1,"column":9251}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":404,"column":43},"generated":{"line":1,"column":9253}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":408,"column":36},"generated":{"line":1,"column":9345}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":409,"column":41},"generated":{"line":1,"column":9402}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":413,"column":47},"generated":{"line":1,"column":9541}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":414,"column":51},"generated":{"line":1,"column":9602}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":415,"column":51},"generated":{"line":1,"column":9663}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":418,"column":16},"generated":{"line":1,"column":9708}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":421,"column":34},"generated":{"line":1,"column":9763}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":422,"column":47},"generated":{"line":1,"column":9786}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":422,"column":18},"generated":{"line":1,"column":9790}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":430,"column":16},"generated":{"line":1,"column":10031}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":431,"column":54},"generated":{"line":1,"column":10060}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":431,"column":25},"generated":{"line":1,"column":10064}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":434,"column":47},"generated":{"line":1,"column":10203}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":439,"column":16},"generated":{"line":1,"column":10324}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":440,"column":54},"generated":{"line":1,"column":10353}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":440,"column":25},"generated":{"line":1,"column":10357}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":443,"column":47},"generated":{"line":1,"column":10496}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":444,"column":51},"generated":{"line":1,"column":10557}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":448,"column":16},"generated":{"line":1,"column":10640}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":451,"column":22},"generated":{"line":1,"column":10694}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":10727}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":10735}},{"source":"../src/pool_gpu.ts","name":null,"original":{"line":226,"column":26},"generated":{"line":1,"column":10749}}],"sources":{"../src/pool_gpu.ts":"/**\n * @license\n * Copyright 2017 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util} from '@tensorflow/tfjs-core';\nimport {GPGPUProgram} from './gpgpu_math';\n\nexport class Pool2DProgram implements GPGPUProgram {\n  variableNames = ['x'];\n  outputShape: number[];\n  userCode: string;\n\n  constructor(\n      convInfo: backend_util.Conv2DInfo, poolType: 'max'|'avg',\n      computePositions: boolean, flattenPositions = false,\n      includeBatchInIndex = false) {\n    if (poolType === 'avg' && computePositions) {\n      throw new Error('Cannot compute positions for average pool.');\n    }\n\n    const filterWidth = convInfo.filterWidth;\n    const strideHeight = convInfo.strideHeight;\n    const strideWidth = convInfo.strideWidth;\n    const dilationHeight = convInfo.dilationHeight;\n    const dilationWidth = convInfo.dilationWidth;\n    const effectiveFilterHeight = convInfo.effectiveFilterHeight;\n    const effectiveFilterWidth = convInfo.effectiveFilterWidth;\n\n    const padTop = convInfo.padInfo.top;\n    const padLeft = convInfo.padInfo.left;\n    this.outputShape = convInfo.outShape;\n\n    const isAvgPool = poolType === 'avg';\n    const batchFlattenPositionStr = `((batch  * ${convInfo.inHeight} + xR) * ${\n        convInfo.inWidth} + xC) * ${convInfo.inChannels} + d`;\n    const flattenPositionStr =\n        `(xR * ${convInfo.inWidth} + xC) * ${convInfo.inChannels} + d`;\n\n    let initializationValue = '0.0';\n    if (!isAvgPool) {\n      // WebGL on Firefox Linux can't compile 1/0 so we do 1/eps.\n      initializationValue = '-1.0 / 1e-20';\n    }\n\n    if (computePositions) {\n      const compareOp = '>=';\n\n      this.userCode = `\n        const ivec2 strides = ivec2(${strideHeight}, ${strideWidth});\n        const ivec2 pads = ivec2(${padTop}, ${padLeft});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${effectiveFilterHeight};\n              wR += ${dilationHeight}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${convInfo.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${effectiveFilterWidth};\n                wC += ${dilationWidth}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${convInfo.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${compareOp} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${\n          flattenPositions ? (includeBatchInIndex ? batchFlattenPositionStr :\n                                                    flattenPositionStr) :\n                             `wR * ${effectiveFilterWidth} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `;\n      return;\n    }\n\n    const compareOp = 'max';\n\n    let returnValue = `${poolType}(${poolType}(${poolType}(` +\n        'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n    if (poolType === 'avg') {\n      returnValue = `avgValue / count`;\n    }\n\n    const filterWidthNearestVec4 = Math.floor(filterWidth / 4) * 4;\n    const filterWidthVec4Remainder = filterWidth % 4;\n\n    const updateSnippet = `\n      if (${isAvgPool}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${compareOp}(values, minMaxValue);\n      }\n    `;\n\n    this.userCode = `\n      const ivec2 strides = ivec2(${strideHeight}, ${strideWidth});\n      const ivec2 pads = ivec2(${padTop}, ${padLeft});\n      const float initializationValue = ${initializationValue};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${convInfo.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${initializationValue});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${effectiveFilterHeight};\n            wR += ${dilationHeight}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${convInfo.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${filterWidthNearestVec4}; wC += 4) {\n            int xC = xCCorner + wC * ${dilationWidth};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${dilationWidth}, d),\n              getValue(batch, xR, xC + 2 * ${dilationWidth}, d),\n              getValue(batch, xR, xC + 3 * ${dilationWidth}, d)\n            );\n\n            ${updateSnippet}\n          }\n\n          int xC = xCCorner + ${filterWidthNearestVec4};\n          if (${filterWidthVec4Remainder === 1}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${updateSnippet}\n          } else if (${filterWidthVec4Remainder === 2}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${dilationWidth}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${updateSnippet}\n          } else if (${filterWidthVec4Remainder === 3}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${dilationWidth}, d),\n              getValue(batch, xR, xC + 2 * ${dilationWidth}, d),\n              initializationValue\n            );\n\n            ${updateSnippet}\n          }\n        }\n        setOutput(${returnValue});\n      }\n    `;\n  }\n}\n\nexport class Pool3DProgram implements GPGPUProgram {\n  variableNames = ['x'];\n  outputShape: number[];\n  userCode: string;\n\n  constructor(\n      convInfo: backend_util.Conv3DInfo, poolType: 'max'|'avg',\n      computePositions: boolean, flattenPositions = false,\n      includeBatchInIndex = false) {\n    if (poolType === 'avg' && computePositions) {\n      throw new Error('Cannot compute positions for average pool.');\n    }\n\n    const filterWidth = convInfo.filterWidth;\n    const strideDepth = convInfo.strideDepth;\n    const strideHeight = convInfo.strideHeight;\n    const strideWidth = convInfo.strideWidth;\n    const dilationDepth = convInfo.dilationDepth;\n    const dilationHeight = convInfo.dilationHeight;\n    const dilationWidth = convInfo.dilationWidth;\n    const effectiveFilterDepth = convInfo.effectiveFilterDepth;\n    const effectiveFilterHeight = convInfo.effectiveFilterHeight;\n    const effectiveFilterWidth = convInfo.effectiveFilterWidth;\n\n    const padFront = convInfo.padInfo.front;\n    const padTop = convInfo.padInfo.top;\n    const padLeft = convInfo.padInfo.left;\n    this.outputShape = convInfo.outShape;\n\n    const isAvgPool = poolType === 'avg';\n\n    let initializationValue = '0.0';\n    if (!isAvgPool) {\n      // WebGL on Firefox Linux can't compile 1/0 so we do 1/eps.\n      initializationValue = '-1.0 / 1e-20';\n    }\n\n    if (computePositions) {\n      const compareOp = '>=';\n\n      this.userCode = `\n        const ivec3 strides =\n            ivec3(${strideDepth}, ${strideHeight}, ${strideWidth});\n        const ivec3 pads = ivec3(${padFront}, ${padTop}, ${padLeft});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${effectiveFilterDepth};\n              wD += ${dilationDepth}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${convInfo.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${effectiveFilterHeight};\n                wR += ${dilationHeight}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${convInfo.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${effectiveFilterWidth};\n                  wC += ${dilationWidth}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${convInfo.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${compareOp} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${\n          flattenPositions ?\n              (includeBatchInIndex ?\n                   `(((batch * ${convInfo.inDepth} + xD) * ${\n                       convInfo.inHeight} + xR) * ${convInfo.inWidth} + xC) * ${\n                       convInfo.inChannels} + ch` :\n                   `((xD * ${convInfo.inHeight} + xR) * ${\n                       convInfo.inWidth} + xC) * ${convInfo.inChannels} + ch`) :\n              `wD * ${effectiveFilterHeight} * ${effectiveFilterWidth} +\n                      wR * ${effectiveFilterWidth} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `;\n      return;\n    }\n\n    const compareOp = 'max';\n\n    let returnValue = `${poolType}(${poolType}(${poolType}(` +\n        'minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])';\n    if (poolType === 'avg') {\n      returnValue = `avgValue / count`;\n    }\n\n    const filterWidthNearestVec4 = Math.floor(filterWidth / 4) * 4;\n    const filterWidthVec4Remainder = filterWidth % 4;\n\n    const updateSnippet = `\n      if (${isAvgPool}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${compareOp}(values, minMaxValue);\n      }\n    `;\n\n    this.userCode = `\n      const ivec3 strides =\n        ivec3(${strideDepth}, ${strideHeight}, ${strideWidth});\n      const ivec3 pads = ivec3(${padFront}, ${padTop}, ${padLeft});\n      const float initializationValue = ${initializationValue};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${convInfo.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${initializationValue});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${effectiveFilterDepth};\n            wD += ${dilationDepth}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${convInfo.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${effectiveFilterHeight};\n            wR += ${dilationHeight}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${convInfo.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${filterWidthNearestVec4}; wC += 4) {\n              int xC = xCCorner + wC * ${dilationWidth};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${dilationWidth}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${dilationWidth}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${dilationWidth}, ch)\n              );\n\n              ${updateSnippet}\n            }\n\n            int xC = xCCorner + ${filterWidthNearestVec4};\n            if (${filterWidthVec4Remainder === 1}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${updateSnippet}\n            } else if (${filterWidthVec4Remainder === 2}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${dilationWidth}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${updateSnippet}\n            } else if (${filterWidthVec4Remainder === 3}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${dilationWidth}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${dilationWidth}, ch),\n                initializationValue\n              );\n\n              ${updateSnippet}\n            }\n          }\n          setOutput(${returnValue});\n        }\n      }\n    `;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"a67398a7c572f106d01a6cc505b5d576","cacheData":{"env":{}}}