{"id":"vOsJ","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/shader_compiler_util.js.map","includedInParent":true,"mtime":1634449894355},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/package.json","includedInParent":true,"mtime":1634449883544},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/.babelrc","includedInParent":true,"mtime":1634449693369},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":1634449894355},{"name":"@tensorflow/tfjs-core","loc":{"line":17,"column":21},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/shader_compiler_util.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.getLogicalCoordinatesFromFlatIndex=e,exports.dotify=o,exports.getFlatIndexFrom3D=r,exports.ENCODE_FLOAT_SNIPPET=void 0;var n=require(\"@tensorflow/tfjs-core\");function e(e,t,o=\"index\"){const r=n.util.computeStrides(t);return r.map((n,t)=>{return`${`int ${e[t]} = ${o} / ${n}`}; ${t===r.length-1?`int ${e[t+1]} = ${o} - ${e[t]} * ${n}`:`index -= ${e[t]} * ${n}`};`}).join(\"\")}function t(n){return 1===n.length?`${n[0]}`:`vec${n.length}(${n.join(\",\")})`}function o(n,e){if(n.length!==e.length)throw new Error(\"Vectors to be dotted must be of the same length -\"+`got ${n.length} and ${e.length}`);const o=[],r=Math.floor(n.length/4),c=n.length%4;for(let l=0;l<r;l++){const r=n.slice(4*l,4*l+4),c=e.slice(4*l,4*l+4);o.push(`${t(r)}, ${t(c)}`)}if(0!==c){let c=n.slice(4*r),l=e.slice(4*r);1===c.length&&(c=c.map(n=>`float(${n})`),l=l.map(n=>`float(${n})`)),o.push(`${t(c)}, ${t(l)}`)}return o.map((n,e)=>`dot(${n})`).join(\"+\")}function r(e){const t=n.util.computeStrides(e).map(n=>n.toString());return`\\n  int getFlatIndex(ivec3 coords) {\\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\\n  }\\n`}const c=\"\\n  const float FLOAT_MAX = 1.70141184e38;\\n  const float FLOAT_MIN = 1.17549435e-38;\\n\\n  lowp vec4 encode_float(highp float v) {\\n    if (isnan(v)) {\\n      return vec4(255, 255, 255, 255);\\n    }\\n\\n    highp float av = abs(v);\\n\\n    if(av < FLOAT_MIN) {\\n      return vec4(0.0, 0.0, 0.0, 0.0);\\n    } else if(v > FLOAT_MAX) {\\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\\n    } else if(v < -FLOAT_MAX) {\\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\\n    }\\n\\n    highp vec4 c = vec4(0,0,0,0);\\n\\n    highp float e = floor(log2(av));\\n    highp float m = exp2(fract(log2(av))) - 1.0;\\n\\n    c[2] = floor(128.0 * m);\\n    m -= c[2] / 128.0;\\n    c[1] = floor(32768.0 * m);\\n    m -= c[1] / 32768.0;\\n    c[0] = floor(8388608.0 * m);\\n\\n    highp float ebias = e + 127.0;\\n    c[3] = floor(ebias / 2.0);\\n    ebias -= c[3] * 2.0;\\n    c[2] += floor(ebias) * 128.0;\\n\\n    c[3] += 128.0 * step(0.0, -v);\\n\\n    return c / 255.0;\\n  }\\n\";exports.ENCODE_FLOAT_SNIPPET=c;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":0}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":13}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":20}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":35}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":43}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":56}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":57}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":64}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":68}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":76}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":111}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":113}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":121}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":128}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":130}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":138}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":157}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":159}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":167}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":193}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":195}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":199}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":201}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":209}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":234}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":243}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":245}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":26,"column":22},"generated":{"line":1,"column":247}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":26,"column":39},"generated":{"line":1,"column":249}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":26,"column":47},"generated":{"line":1,"column":251}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":260}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":266}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":18},"generated":{"line":1,"column":268}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":23},"generated":{"line":1,"column":270}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":23},"generated":{"line":1,"column":275}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":27,"column":38},"generated":{"line":1,"column":290}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":28,"column":9},"generated":{"line":1,"column":293}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":28,"column":9},"generated":{"line":1,"column":300}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":29,"column":7},"generated":{"line":1,"column":302}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":306}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":29,"column":12},"generated":{"line":1,"column":307}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":309}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":314}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":330}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":30,"column":36},"generated":{"line":1,"column":332}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":30,"column":44},"generated":{"line":1,"column":340}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":30,"column":55},"generated":{"line":1,"column":347}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":1,"column":355}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":1,"column":359}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":31,"column":36},"generated":{"line":1,"column":361}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":31,"column":45},"generated":{"line":1,"column":368}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":19},"generated":{"line":1,"column":377}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":379}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":30},"generated":{"line":1,"column":381}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":38},"generated":{"line":1,"column":389}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":49},"generated":{"line":1,"column":396}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":56},"generated":{"line":1,"column":398}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":32,"column":64},"generated":{"line":1,"column":406}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":33,"column":24},"generated":{"line":1,"column":422}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":33,"column":31},"generated":{"line":1,"column":424}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":33,"column":39},"generated":{"line":1,"column":432}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":36,"column":7},"generated":{"line":1,"column":441}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":1,"column":446}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":450}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":459}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":39,"column":18},"generated":{"line":1,"column":461}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":40,"column":6},"generated":{"line":1,"column":464}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":40,"column":19},"generated":{"line":1,"column":471}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":40,"column":6},"generated":{"line":1,"column":475}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":477}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":41,"column":14},"generated":{"line":1,"column":487}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":41,"column":16},"generated":{"line":1,"column":489}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":43,"column":15},"generated":{"line":1,"column":500}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":43,"column":17},"generated":{"line":1,"column":502}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":43,"column":27},"generated":{"line":1,"column":512}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":514}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":43,"column":34},"generated":{"line":1,"column":519}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":527}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":536}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":50,"column":23},"generated":{"line":1,"column":538}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":50,"column":36},"generated":{"line":1,"column":540}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":543}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":546}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":548}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":1,"column":557}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":51,"column":21},"generated":{"line":1,"column":559}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":566}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":572}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":52,"column":14},"generated":{"line":1,"column":576}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":582}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":54,"column":15},"generated":{"line":1,"column":641}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":54,"column":17},"generated":{"line":1,"column":643}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":657}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":54,"column":33},"generated":{"line":1,"column":659}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":57,"column":8},"generated":{"line":1,"column":669}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":57,"column":8},"generated":{"line":1,"column":675}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":57,"column":27},"generated":{"line":1,"column":677}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":680}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":682}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":27},"generated":{"line":1,"column":687}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":33},"generated":{"line":1,"column":693}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":35},"generated":{"line":1,"column":695}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":58,"column":44},"generated":{"line":1,"column":702}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":705}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":707}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":59,"column":33},"generated":{"line":1,"column":709}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":59,"column":42},"generated":{"line":1,"column":716}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":7},"generated":{"line":1,"column":718}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":7},"generated":{"line":1,"column":722}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":726}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":728}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":18},"generated":{"line":1,"column":730}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":732}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":35},"generated":{"line":1,"column":734}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":61,"column":40},"generated":{"line":1,"column":738}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":739}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":745}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":747}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":749}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":31},"generated":{"line":1,"column":755}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":27},"generated":{"line":1,"column":757}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":38},"generated":{"line":1,"column":759}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":34},"generated":{"line":1,"column":761}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":62,"column":42},"generated":{"line":1,"column":763}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":766}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":19},"generated":{"line":1,"column":768}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":21},"generated":{"line":1,"column":770}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":776}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":27},"generated":{"line":1,"column":778}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":38},"generated":{"line":1,"column":780}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":34},"generated":{"line":1,"column":782}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":63,"column":42},"generated":{"line":1,"column":784}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":1,"column":787}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":789}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":19},"generated":{"line":1,"column":797}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":28},"generated":{"line":1,"column":799}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":40},"generated":{"line":1,"column":806}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":64,"column":49},"generated":{"line":1,"column":808}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":814}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":67,"column":31},"generated":{"line":1,"column":817}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":821}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":67,"column":34},"generated":{"line":1,"column":823}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":8},"generated":{"line":1,"column":824}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":8},"generated":{"line":1,"column":828}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":17},"generated":{"line":1,"column":830}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":19},"generated":{"line":1,"column":832}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":39},"generated":{"line":1,"column":838}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":68,"column":25},"generated":{"line":1,"column":840}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":843}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":69,"column":17},"generated":{"line":1,"column":845}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":69,"column":19},"generated":{"line":1,"column":847}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":69,"column":39},"generated":{"line":1,"column":853}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":69,"column":25},"generated":{"line":1,"column":855}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":70,"column":26},"generated":{"line":1,"column":858}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":862}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":864}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":71,"column":6},"generated":{"line":1,"column":873}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":71,"column":15},"generated":{"line":1,"column":875}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":1,"column":877}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":71,"column":26},"generated":{"line":1,"column":881}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":71,"column":40},"generated":{"line":1,"column":893}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":72,"column":6},"generated":{"line":1,"column":899}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":1,"column":901}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":1,"column":903}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":907}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":72,"column":40},"generated":{"line":1,"column":919}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":4},"generated":{"line":1,"column":926}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":928}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":19},"generated":{"line":1,"column":936}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":28},"generated":{"line":1,"column":938}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":40},"generated":{"line":1,"column":945}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":74,"column":49},"generated":{"line":1,"column":947}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":1,"column":953}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":1,"column":960}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":1,"column":962}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":20},"generated":{"line":1,"column":966}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":21},"generated":{"line":1,"column":967}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":24},"generated":{"line":1,"column":969}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":37},"generated":{"line":1,"column":980}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":43},"generated":{"line":1,"column":986}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":77,"column":48},"generated":{"line":1,"column":991}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":83,"column":6},"generated":{"line":1,"column":996}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":83,"column":16},"generated":{"line":1,"column":1005}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":83,"column":35},"generated":{"line":1,"column":1007}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1010}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1016}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":18},"generated":{"line":1,"column":1018}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":23},"generated":{"line":1,"column":1020}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":23},"generated":{"line":1,"column":1025}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":38},"generated":{"line":1,"column":1040}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":45},"generated":{"line":1,"column":1043}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":49},"generated":{"line":1,"column":1047}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":54},"generated":{"line":1,"column":1050}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":84,"column":56},"generated":{"line":1,"column":1052}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":86,"column":9},"generated":{"line":1,"column":1064}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":88,"column":24},"generated":{"line":1,"column":1133}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":88,"column":32},"generated":{"line":1,"column":1135}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":88,"column":51},"generated":{"line":1,"column":1154}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":88,"column":59},"generated":{"line":1,"column":1156}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":1180}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":13},"generated":{"line":1,"column":1186}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":36},"generated":{"line":1,"column":1188}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":2142}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":2150}},{"source":"../src/shader_compiler_util.ts","name":null,"original":{"line":93,"column":7},"generated":{"line":1,"column":2171}}],"sources":{"../src/shader_compiler_util.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {util} from '@tensorflow/tfjs-core';\n\n/**\n * Produces GLSL code that derives logical coordinates from a flat\n * index. The code performs integer division with each stride and decrements\n * the index until the index equals the final dimension coordinate.\n */\nexport function getLogicalCoordinatesFromFlatIndex(\n    coords: string[], shape: number[], index = 'index'): string {\n  const strides = util.computeStrides(shape);\n  return strides\n      .map((stride, i) => {\n        const line1 = `int ${coords[i]} = ${index} / ${stride}`;\n        const line2 = i === strides.length - 1 ?\n            `int ${coords[i + 1]} = ${index} - ${coords[i]} * ${stride}` :\n            `index -= ${coords[i]} * ${stride}`;\n        return `${line1}; ${line2};`;\n      })\n      .join('');\n}\n\nfunction buildVec(x: string[]): string {\n  if (x.length === 1) {\n    return `${x[0]}`;\n  }\n  return `vec${x.length}(${x.join(',')})`;\n}\n\n/**\n * Produces GLSL code that computes the dot product of the input x and y\n * vectors. Handles splitting inputs into increments of vec4s when necessary.\n */\nexport function dotify(x: string[], y: string[]): string {\n  if (x.length !== y.length) {\n    throw new Error(\n        `Vectors to be dotted must be of the same length -` +\n        `got ${x.length} and ${y.length}`);\n  }\n\n  const slices: string[] = [];\n  const nearestVec4 = Math.floor(x.length / 4);\n  const nearestVec4Remainder = x.length % 4;\n\n  for (let i = 0; i < nearestVec4; i++) {\n    const xSlice = x.slice(i * 4, i * 4 + 4);\n    const ySlice = y.slice(i * 4, i * 4 + 4);\n    slices.push(`${buildVec(xSlice)}, ${buildVec(ySlice)}`);\n  }\n\n  if (nearestVec4Remainder !== 0) {\n    let xSlice = x.slice(nearestVec4 * 4);\n    let ySlice = y.slice(nearestVec4 * 4);\n    if (xSlice.length === 1) {\n      xSlice = xSlice.map(d => `float(${d})`);\n      ySlice = ySlice.map(d => `float(${d})`);\n    }\n    slices.push(`${buildVec(xSlice)}, ${buildVec(ySlice)}`);\n  }\n\n  return slices.map((d, i) => `dot(${d})`).join('+');\n}\n\n/**\n * Produces GLSL that computes the flat index from 3D coordinates.\n */\nexport function getFlatIndexFrom3D(shape: [number, number, number]): string {\n  const strides = util.computeStrides(shape).map(d => d.toString());\n\n  return `\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${strides[0]} + coords.y * ${strides[1]} + coords.z;\n  }\n`;\n}\n\nexport const ENCODE_FLOAT_SNIPPET = `\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n`;\n"},"lineCount":null}},"error":null,"hash":"6836963bdfb98893578aa3fadc09725c","cacheData":{"env":{}}}