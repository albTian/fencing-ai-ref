{"id":"dH5p","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_packed_gpu.js.map","includedInParent":true,"mtime":1634449894355},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/package.json","includedInParent":true,"mtime":1634449883544},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/.babelrc","includedInParent":true,"mtime":1634449693369},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":1634449894355},{"name":"./glsl_version","loc":{"line":17,"column":35},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_packed_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/glsl_version.js"},{"name":"./shader_compiler_util","loc":{"line":18,"column":29},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_packed_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/shader_compiler_util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.EncodeMatrixPackedProgram=void 0;var e=require(\"./glsl_version\"),t=r(require(\"./shader_compiler_util\"));function n(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=l?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class o{constructor(n,r,o=!1){this.variableNames=[\"A\"],this.packedInputs=!1,this.packedOutput=!0;const l=(0,e.getGlslDifferences)(),[s,a]=r;this.outputShape=n;let u=\"\",c=\"result\";o&&(c=\"floor(result * 255. + 0.5)\");for(let e=0;e<=1;e++)for(let t=0;t<=1;t++){const r=2*e+t;u+=`\\n          localCoords = coords;\\n          if(localCoords[2] + ${t} < ${n[2]}) {\\n            localCoords[2] += ${t};\\n            if(localCoords[1] + ${e} < ${n[1]}) {\\n              localCoords[1] += ${e};\\n\\n              flatIndex = getFlatIndex(localCoords);\\n              offset = imod(flatIndex, 4);\\n\\n              flatIndex = idiv(flatIndex, 4, 1.);\\n\\n              r = flatIndex / ${a};\\n              c = imod(flatIndex, ${a});\\n              uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${s}.0);\\n              values = ${l.texture2D}(A, uv);\\n\\n              if(offset == 0) {\\n                result[${r}] = values[0];\\n              } else if(offset == 1) {\\n                result[${r}] = values[1];\\n              } else if(offset == 2) {\\n                result[${r}] = values[2];\\n              } else {\\n                result[${r}] = values[3];\\n              }\\n            }\\n          }\\n        `}this.userCode=`\\n      ${t.getFlatIndexFrom3D(n)}\\n\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n\\n        vec4 result = vec4(0.);\\n        int flatIndex, r, c, offset;\\n        ivec3 localCoords;\\n        vec2 uv;\\n        vec4 values;\\n\\n        ${u}\\n\\n        ${l.output} = ${c};\\n      }\\n    `}}exports.EncodeMatrixPackedProgram=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":0}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":13}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":20}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":35}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":43}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":56}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":57}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":64}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":68}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":76}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":107}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":109}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":113}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":115}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":123}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":141}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":143}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":145}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":153}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":180}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":189}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":191}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":194}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":197}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":216}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":224}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":231}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":236}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":240}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":242}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":246}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":254}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":256}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":260}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":268}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":275}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":277}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":286}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":289}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":296}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":298}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":300}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":304}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":307}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":316}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":318}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":320}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":323}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":327}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":330}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":333}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":335}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":346}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":353}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":355}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":358}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":365}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":368}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":385}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":388}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":407}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":409}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":415}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":416}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":424}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":427}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":431}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":433}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":435}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":438}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":441}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":444}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":446}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":450}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":453}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":460}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":462}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":466}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":469}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":473}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":475}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":478}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":480}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":487}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":503}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":510}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":535}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":539}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":543}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":548}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":550}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":553}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":565}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":568}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":575}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":585}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":600}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":605}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":607}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":610}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":611}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":615}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":617}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":619}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":626}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":651}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":653}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":656}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":661}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":665}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":667}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":672}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":674}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":679}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":686}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":701}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":703}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":705}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":708}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":710}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":713}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":715}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":718}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":725}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":727}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":735}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":737}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":740}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":742}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":746}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":748}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":751}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":1,"column":753}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":13},"generated":{"line":1,"column":759}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":761}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":773}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":46,"column":45},"generated":{"line":1,"column":775}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":47,"column":6},"generated":{"line":1,"column":777}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":47,"column":28},"generated":{"line":1,"column":780}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":783}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":788}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":39,"column":18},"generated":{"line":1,"column":802}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":1,"column":803}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":808}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":813}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":827}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":829}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":834}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":43,"column":17},"generated":{"line":1,"column":848}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":48,"column":10},"generated":{"line":1,"column":850}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":48,"column":10},"generated":{"line":1,"column":856}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":48,"column":17},"generated":{"line":1,"column":859}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":1,"column":861}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":48,"column":4},"generated":{"line":1,"column":863}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":49,"column":11},"generated":{"line":1,"column":886}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":49,"column":19},"generated":{"line":1,"column":888}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":49,"column":28},"generated":{"line":1,"column":891}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":50,"column":9},"generated":{"line":1,"column":893}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":50,"column":9},"generated":{"line":1,"column":898}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":50,"column":23},"generated":{"line":1,"column":910}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":912}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":916}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":52,"column":19},"generated":{"line":1,"column":918}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":921}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":53,"column":17},"generated":{"line":1,"column":923}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":932}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":936}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":55,"column":15},"generated":{"line":1,"column":938}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":968}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":972}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":13},"generated":{"line":1,"column":976}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":19},"generated":{"line":1,"column":978}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":980}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":983}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":58,"column":32},"generated":{"line":1,"column":985}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":989}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":993}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":15},"generated":{"line":1,"column":997}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":21},"generated":{"line":1,"column":999}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":1,"column":1001}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":1004}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":34},"generated":{"line":1,"column":1006}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":59,"column":41},"generated":{"line":1,"column":1010}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":1011}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":60,"column":14},"generated":{"line":1,"column":1017}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":60,"column":30},"generated":{"line":1,"column":1019}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":60,"column":24},"generated":{"line":1,"column":1021}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":60,"column":34},"generated":{"line":1,"column":1023}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":1025}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":64,"column":32},"generated":{"line":1,"column":1096}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":64,"column":41},"generated":{"line":1,"column":1103}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":64,"column":53},"generated":{"line":1,"column":1105}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":65,"column":32},"generated":{"line":1,"column":1145}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":66,"column":34},"generated":{"line":1,"column":1184}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":66,"column":43},"generated":{"line":1,"column":1191}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":66,"column":55},"generated":{"line":1,"column":1193}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":67,"column":34},"generated":{"line":1,"column":1235}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":74,"column":32},"generated":{"line":1,"column":1427}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":75,"column":36},"generated":{"line":1,"column":1468}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":76,"column":50},"generated":{"line":1,"column":1524}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":76,"column":62},"generated":{"line":1,"column":1532}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":77,"column":25},"generated":{"line":1,"column":1565}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":77,"column":30},"generated":{"line":1,"column":1567}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":80,"column":25},"generated":{"line":1,"column":1647}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":1,"column":1730}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":84,"column":25},"generated":{"line":1,"column":1813}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":86,"column":25},"generated":{"line":1,"column":1880}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1953}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1958}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":95,"column":8},"generated":{"line":1,"column":1978}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":95,"column":20},"generated":{"line":1,"column":1980}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":95,"column":39},"generated":{"line":1,"column":1999}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":106,"column":10},"generated":{"line":1,"column":2223}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":108,"column":10},"generated":{"line":1,"column":2239}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":108,"column":15},"generated":{"line":1,"column":2241}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":108,"column":27},"generated":{"line":1,"column":2253}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":2274}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":2282}},{"source":"../src/encode_matrix_packed_gpu.ts","name":null,"original":{"line":38,"column":38},"generated":{"line":1,"column":2308}}],"sources":{"../src/encode_matrix_packed_gpu.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {getGlslDifferences} from './glsl_version';\nimport {GPGPUProgram} from './gpgpu_math';\nimport * as shader_util from './shader_compiler_util';\n\n/*\nThis is how the shader encodes a tensor with shape = [2, 3, 5]\n(indices are [batch, row, col]).\n\n000|001   002|003   004|xxx   020|021   022|023   024|xxx\n-------   -------   -------   -------   -------   -------\n010|011   012|013   014|xxx   xxx|xxx   xxx|xxx   xxx|xxx\n\n100|101   102|103   104|xxx   120|121   122|123   124|xxx\n-------   -------   -------   -------   -------   -------\n110|111   112|113   114|xxx   xxx|xxx   xxx|xxx   xxx|xxx\n\nSingle texels contain only values from the same batch, and from adjacent rows\nand columns.\n */\n\nexport class EncodeMatrixPackedProgram implements GPGPUProgram {\n  variableNames = ['A'];\n  userCode: string;\n  outputShape: number[];\n  packedInputs = false;\n  packedOutput = true;\n\n  constructor(\n      outputShape: [number, number, number], texShape: [number, number],\n      inputIsUnsignedByte = false) {\n    const glsl = getGlslDifferences();\n    const [height, width] = texShape;\n    this.outputShape = outputShape;\n\n    let mainLoop = '';\n    let output = 'result';\n    if (inputIsUnsignedByte) {\n      output = 'floor(result * 255. + 0.5)';\n    }\n\n    for (let row = 0; row <= 1; row++) {\n      for (let col = 0; col <= 1; col++) {\n        const channel = row * 2 + col;\n\n        mainLoop += `\n          localCoords = coords;\n          if(localCoords[2] + ${col} < ${outputShape[2]}) {\n            localCoords[2] += ${col};\n            if(localCoords[1] + ${row} < ${outputShape[1]}) {\n              localCoords[1] += ${row};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${width};\n              c = imod(flatIndex, ${width});\n              uv = (vec2(c, r) + halfCR) / vec2(${width}.0, ${height}.0);\n              values = ${glsl.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${channel}] = values[0];\n              } else if(offset == 1) {\n                result[${channel}] = values[1];\n              } else if(offset == 2) {\n                result[${channel}] = values[2];\n              } else {\n                result[${channel}] = values[3];\n              }\n            }\n          }\n        `;\n      }\n    }\n\n    this.userCode = `\n      ${shader_util.getFlatIndexFrom3D(outputShape)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${mainLoop}\n\n        ${glsl.output} = ${output};\n      }\n    `;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"1c1946e1b320b756e1e4433a9c8cbd32","cacheData":{"env":{}}}