{"id":"JBcV","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_gpu.js.map","includedInParent":true,"mtime":1634449894355},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/package.json","includedInParent":true,"mtime":1634449883544},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/.babelrc","includedInParent":true,"mtime":1634449693369},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/package.json","includedInParent":true,"mtime":1634449894355},{"name":"./glsl_version","loc":{"line":17,"column":35},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/glsl_version.js"},{"name":"./shader_compiler_util","loc":{"line":18,"column":29},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/encode_matrix_gpu.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-backend-webgl/dist/shader_compiler_util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.EncodeMatrixProgram=void 0;var e=require(\"./glsl_version\"),t=r(require(\"./shader_compiler_util\"));function n(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=l?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class o{constructor(n,r,o=!1){this.variableNames=[\"A\"];const l=(0,e.getGlslDifferences)(),[s,u]=r;this.outputShape=n;let a=\"result\";o&&(a=\"floor(result * 255. + 0.5)\"),this.userCode=`\\n      ${t.getFlatIndexFrom3D(n)}\\n\\n      void main() {\\n        ivec3 coords = getOutputCoords();\\n\\n        int flatIndex = getFlatIndex(coords);\\n        int offset = imod(flatIndex, 4);\\n\\n        flatIndex = idiv(flatIndex, 4, 1.);\\n\\n        int r = flatIndex / ${u};\\n        int c = imod(flatIndex, ${u});\\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${u}.0, ${s}.0);\\n        vec4 values = ${l.texture2D}(A, uv);\\n\\n        float result;\\n\\n        if(offset == 0) {\\n          result = values[0];\\n        } else if(offset == 1) {\\n          result = values[1];\\n        } else if(offset == 2) {\\n          result = values[2];\\n        } else {\\n          result = values[3];\\n        }\\n\\n        ${l.output} = vec4(${a}, 0., 0., 0.);\\n      }\\n    `}}exports.EncodeMatrixProgram=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":0}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":13}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":20}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":35}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":43}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":56}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":57}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":64}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":68}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":76}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":101}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":103}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":107}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":109}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":117}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":135}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":137}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":139}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":147}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":174}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":183}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":185}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":188}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":191}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":210}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":218}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":225}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":230}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":234}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":236}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":240}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":248}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":250}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":254}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":262}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":269}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":271}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":280}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":283}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":290}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":292}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":294}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":298}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":301}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":310}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":312}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":314}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":317}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":321}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":324}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":327}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":329}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":340}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":347}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":349}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":352}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":359}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":362}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":379}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":382}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":401}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":403}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":409}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":410}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":418}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":421}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":425}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":427}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":429}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":432}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":435}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":438}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":440}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":444}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":447}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":454}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":456}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":460}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":463}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":467}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":469}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":472}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":474}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":481}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":497}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":504}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":529}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":533}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":537}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":542}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":544}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":547}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":559}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":562}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":569}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":579}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":594}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":599}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":601}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":604}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":605}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":609}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":611}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":613}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":620}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":645}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":647}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":650}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":655}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":659}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":661}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":666}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":668}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":673}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":680}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":695}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":697}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":699}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":702}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":704}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":707}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":709}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":712}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":719}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":721}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":729}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":731}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":734}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":736}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":740}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":742}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":745}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":6},"generated":{"line":1,"column":747}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":13},"generated":{"line":1,"column":753}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":755}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":767}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":28,"column":45},"generated":{"line":1,"column":769}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":771}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":29,"column":28},"generated":{"line":1,"column":774}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":777}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":782}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":23,"column":18},"generated":{"line":1,"column":796}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":23,"column":19},"generated":{"line":1,"column":797}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":802}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":808}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":1,"column":811}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":1,"column":813}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":1,"column":815}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":838}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":31,"column":19},"generated":{"line":1,"column":840}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":1,"column":843}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":1,"column":845}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":32,"column":9},"generated":{"line":1,"column":850}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":1,"column":862}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":864}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":868}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":34,"column":17},"generated":{"line":1,"column":870}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":879}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":1,"column":883}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":36,"column":15},"generated":{"line":1,"column":885}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":915}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":920}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":940}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":1,"column":942}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":40,"column":39},"generated":{"line":1,"column":961}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":50,"column":30},"generated":{"line":1,"column":1202}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":51,"column":34},"generated":{"line":1,"column":1241}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":52,"column":49},"generated":{"line":1,"column":1296}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":52,"column":61},"generated":{"line":1,"column":1304}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":53,"column":24},"generated":{"line":1,"column":1336}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":53,"column":29},"generated":{"line":1,"column":1338}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":1645}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":67,"column":15},"generated":{"line":1,"column":1647}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":67,"column":32},"generated":{"line":1,"column":1664}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":1698}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":1706}},{"source":"../src/encode_matrix_gpu.ts","name":null,"original":{"line":22,"column":32},"generated":{"line":1,"column":1726}}],"sources":{"../src/encode_matrix_gpu.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {getGlslDifferences} from './glsl_version';\nimport {GPGPUProgram} from './gpgpu_math';\nimport * as shader_util from './shader_compiler_util';\n\nexport class EncodeMatrixProgram implements GPGPUProgram {\n  variableNames = ['A'];\n  userCode: string;\n  outputShape: number[];\n\n  constructor(\n      outputShape: [number, number, number], texShape: [number, number],\n      inputIsUnsignedByte = false) {\n    const glsl = getGlslDifferences();\n    const [height, width] = texShape;\n    this.outputShape = outputShape;\n\n    let output = `result`;\n    if (inputIsUnsignedByte) {\n      output = `floor(result * 255. + 0.5)`;\n    }\n\n    this.userCode = `\n      ${shader_util.getFlatIndexFrom3D(outputShape)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${width};\n        int c = imod(flatIndex, ${width});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${width}.0, ${height}.0);\n        vec4 values = ${glsl.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${glsl.output} = vec4(${output}, 0., 0., 0.);\n      }\n    `;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"5e7fd9ecdae7c3d0e3e5ea933e075728","cacheData":{"env":{}}}