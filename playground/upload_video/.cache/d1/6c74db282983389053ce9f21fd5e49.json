{"id":"oWMZ","dependencies":[{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js.map","includedInParent":true,"mtime":1634449894361},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/package.json","includedInParent":true,"mtime":1634449883544},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/.babelrc","includedInParent":true,"mtime":1634449693369},{"name":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":1634449894361},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/add","loc":{"line":19,"column":20},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/add.js"},{"name":"../ops/div","loc":{"line":20,"column":20},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/div.js"},{"name":"../ops/fill","loc":{"line":21,"column":21},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/fill.js"},{"name":"../ops/mul","loc":{"line":22,"column":20},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js"},{"name":"../ops/sqrt","loc":{"line":23,"column":21},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/sqrt.js"},{"name":"../ops/square","loc":{"line":24,"column":23},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/ops/square.js"},{"name":"../serialization","loc":{"line":25,"column":30},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./optimizer","loc":{"line":26,"column":26},"parent":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/adagrad_optimizer.js","resolved":"/Users/alberttian/f21/playground/frontend/upload_video/node_modules/@tensorflow/tfjs-core/dist/optimizers/optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.AdagradOptimizer=void 0;var a=require(\"../engine\"),e=require(\"../globals\"),i=require(\"../ops/add\"),r=require(\"../ops/div\"),t=require(\"../ops/fill\"),s=require(\"../ops/mul\"),l=require(\"../ops/sqrt\"),n=require(\"../ops/square\"),u=require(\"../serialization\"),c=require(\"./optimizer\");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className=\"Adagrad\",(0,u.registerClass)(o);"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":98}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":100}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":104}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":106}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":114}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":127}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":129}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":137}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":151}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":153}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":161}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":175}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":177}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":185}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":199}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":201}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":209}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":224}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":226}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":234}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":248}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":250}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":1,"column":258}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":273}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":275}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":283}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":300}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":302}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":310}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":330}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":332}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":340}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":355}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":361}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":32,"column":38},"generated":{"line":1,"column":371}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":373}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":38,"column":2},"generated":{"line":1,"column":383}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":395}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":397}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":72},"generated":{"line":1,"column":399}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":403}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":411}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":416}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":16},"generated":{"line":1,"column":429}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":431}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":436}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":39,"column":46},"generated":{"line":1,"column":460}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":462}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":467}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":36,"column":50},"generated":{"line":1,"column":484}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":487}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":43,"column":17},"generated":{"line":1,"column":502}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":1,"column":506}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":44,"column":32},"generated":{"line":1,"column":512}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":44,"column":40},"generated":{"line":1,"column":520}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":523}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":1,"column":525}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":1,"column":529}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":45,"column":38},"generated":{"line":1,"column":532}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":45,"column":43},"generated":{"line":1,"column":534}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":540}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":46,"column":15},"generated":{"line":1,"column":547}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":46,"column":20},"generated":{"line":1,"column":552}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":48,"column":18},"generated":{"line":1,"column":556}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":48,"column":26},"generated":{"line":1,"column":564}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":565}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":48,"column":33},"generated":{"line":1,"column":567}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":12},"generated":{"line":1,"column":572}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":12},"generated":{"line":1,"column":578}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":20},"generated":{"line":1,"column":580}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":27},"generated":{"line":1,"column":582}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":27},"generated":{"line":1,"column":589}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":49,"column":47},"generated":{"line":1,"column":609}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":612}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":38},"generated":{"line":1,"column":615}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":621}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":15},"generated":{"line":1,"column":626}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":32},"generated":{"line":1,"column":643}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":50,"column":44},"generated":{"line":1,"column":646}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":51,"column":14},"generated":{"line":1,"column":647}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":51,"column":14},"generated":{"line":1,"column":653}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":51,"column":26},"generated":{"line":1,"column":656}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":658}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":663}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":1,"column":680}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":52,"column":35},"generated":{"line":1,"column":683}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":53,"column":10},"generated":{"line":1,"column":684}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":53,"column":27},"generated":{"line":1,"column":700}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":1,"column":716}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":54,"column":20},"generated":{"line":1,"column":726}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":14},"generated":{"line":1,"column":728}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":14},"generated":{"line":1,"column":730}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":14},"generated":{"line":1,"column":736}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":20},"generated":{"line":1,"column":741}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":743}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":745}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":751}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":31},"generated":{"line":1,"column":753}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":38},"generated":{"line":1,"column":759}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":55,"column":43},"generated":{"line":1,"column":764}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":789}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":798}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":803}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":60,"column":12},"generated":{"line":1,"column":809}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":1,"column":811}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":60,"column":29},"generated":{"line":1,"column":817}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":60,"column":37},"generated":{"line":1,"column":825}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":828}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":61,"column":28},"generated":{"line":1,"column":830}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":61,"column":31},"generated":{"line":1,"column":833}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":62,"column":10},"generated":{"line":1,"column":840}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":842}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":845}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":63,"column":22},"generated":{"line":1,"column":848}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":854}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":856}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":863}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":12},"generated":{"line":1,"column":869}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":30},"generated":{"line":1,"column":871}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":35},"generated":{"line":1,"column":876}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":52},"generated":{"line":1,"column":893}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":67,"column":55},"generated":{"line":1,"column":896}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":906}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":908}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":910}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":916}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":921}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":927}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":35},"generated":{"line":1,"column":930}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":39},"generated":{"line":1,"column":932}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":39},"generated":{"line":1,"column":934}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":39},"generated":{"line":1,"column":939}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":56},"generated":{"line":1,"column":942}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":63},"generated":{"line":1,"column":944}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":63},"generated":{"line":1,"column":946}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":70,"column":63},"generated":{"line":1,"column":954}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":958}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":71,"column":24},"generated":{"line":1,"column":960}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":71,"column":31},"generated":{"line":1,"column":967}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":970}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":73,"column":14},"generated":{"line":1,"column":976}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":73,"column":25},"generated":{"line":1,"column":979}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":981}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":983}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":989}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":991}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":993}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":999}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1001}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1003}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1008}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":20},"generated":{"line":1,"column":1011}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1013}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1015}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":25},"generated":{"line":1,"column":1022}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1024}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1026}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1031}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":49},"generated":{"line":1,"column":1033}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":56},"generated":{"line":1,"column":1035}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":56},"generated":{"line":1,"column":1042}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":75,"column":64},"generated":{"line":1,"column":1050}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":76,"column":17},"generated":{"line":1,"column":1064}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":76,"column":22},"generated":{"line":1,"column":1069}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":1083}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":78,"column":8},"generated":{"line":1,"column":1086}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":78,"column":14},"generated":{"line":1,"column":1088}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":78,"column":21},"generated":{"line":1,"column":1095}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":81,"column":9},"generated":{"line":1,"column":1102}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":81,"column":9},"generated":{"line":1,"column":1107}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":1129}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":85,"column":33},"generated":{"line":1,"column":1139}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":1145}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":85,"column":13},"generated":{"line":1,"column":1150}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":14},"generated":{"line":1,"column":1169}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":14},"generated":{"line":1,"column":1171}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":14},"generated":{"line":1,"column":1173}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":14},"generated":{"line":1,"column":1182}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":19},"generated":{"line":1,"column":1187}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":1204}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":40},"generated":{"line":1,"column":1208}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":45},"generated":{"line":1,"column":1211}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":86,"column":47},"generated":{"line":1,"column":1213}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":1224}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":1243}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":1249}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":18},"generated":{"line":1,"column":1256}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":23},"generated":{"line":1,"column":1261}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":41},"generated":{"line":1,"column":1279}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":48},"generated":{"line":1,"column":1286}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":53},"generated":{"line":1,"column":1291}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":92,"column":70},"generated":{"line":1,"column":1308}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":1,"column":1312}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":14},"generated":{"line":1,"column":1316}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":15},"generated":{"line":1,"column":1317}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":21},"generated":{"line":1,"column":1322}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":23},"generated":{"line":1,"column":1324}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":37},"generated":{"line":1,"column":1337}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":45},"generated":{"line":1,"column":1344}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":93,"column":47},"generated":{"line":1,"column":1346}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":1,"column":1359}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":96,"column":19},"generated":{"line":1,"column":1376}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":1379}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":97,"column":25},"generated":{"line":1,"column":1387}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":97,"column":30},"generated":{"line":1,"column":1392}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":97,"column":48},"generated":{"line":1,"column":1410}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":99,"column":9},"generated":{"line":1,"column":1413}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":99,"column":9},"generated":{"line":1,"column":1418}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":99,"column":28},"generated":{"line":1,"column":1435}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":99,"column":41},"generated":{"line":1,"column":1437}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":8},"generated":{"line":1,"column":1441}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":14},"generated":{"line":1,"column":1445}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":15},"generated":{"line":1,"column":1446}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":29},"generated":{"line":1,"column":1459}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":31},"generated":{"line":1,"column":1461}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":37},"generated":{"line":1,"column":1466}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":47},"generated":{"line":1,"column":1475}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":49},"generated":{"line":1,"column":1477}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":100,"column":56},"generated":{"line":1,"column":1484}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":1494}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":103,"column":2},"generated":{"line":1,"column":1500}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":104,"column":11},"generated":{"line":1,"column":1512}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":104,"column":11},"generated":{"line":1,"column":1518}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1519}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1532}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":105,"column":27},"generated":{"line":1,"column":1537}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":106,"column":33},"generated":{"line":1,"column":1550}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":106,"column":33},"generated":{"line":1,"column":1574}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":106,"column":38},"generated":{"line":1,"column":1579}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":111,"column":9},"generated":{"line":1,"column":1604}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":112,"column":6},"generated":{"line":1,"column":1622}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":112,"column":39},"generated":{"line":1,"column":1624}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":11},"generated":{"line":1,"column":1627}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":11},"generated":{"line":1,"column":1634}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":15},"generated":{"line":1,"column":1638}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":19},"generated":{"line":1,"column":1640}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":25},"generated":{"line":1,"column":1642}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":43},"generated":{"line":1,"column":1655}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":113,"column":49},"generated":{"line":1,"column":1657}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":1683}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":1691}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":1708}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":1710}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":1712}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":34,"column":21},"generated":{"line":1,"column":1722}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":0},"generated":{"line":1,"column":1733}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":14},"generated":{"line":1,"column":1735}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":14},"generated":{"line":1,"column":1737}},{"source":"../../src/optimizers/adagrad_optimizer.ts","name":null,"original":{"line":116,"column":14},"generated":{"line":1,"column":1752}}],"sources":{"../../src/optimizers/adagrad_optimizer.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ENGINE} from '../engine';\nimport {dispose, tidy} from '../globals';\nimport {add} from '../ops/add';\nimport {div} from '../ops/div';\nimport {fill} from '../ops/fill';\nimport {mul} from '../ops/mul';\nimport {sqrt} from '../ops/sqrt';\nimport {square} from '../ops/square';\nimport {ConfigDict, registerClass, Serializable, SerializableConstructor} from '../serialization';\nimport {NamedTensor, NamedVariableMap} from '../tensor_types';\n\nimport {Optimizer, OptimizerVariable} from './optimizer';\n\n/** @doclink Optimizer */\nexport class AdagradOptimizer extends Optimizer {\n  /** @nocollapse */\n  static className = 'Adagrad';  // Note: Name matters for Python compatibility.\n\n  private accumulatedGrads: OptimizerVariable[] = [];\n\n  constructor(\n      protected learningRate: number, private initialAccumulatorValue = 0.1) {\n    super();\n  }\n\n  applyGradients(variableGradients: NamedVariableMap|NamedTensor[]) {\n    const variableNames = Array.isArray(variableGradients) ?\n        variableGradients.map(item => item.name) :\n        Object.keys(variableGradients);\n\n    variableNames.forEach((name, i) => {\n      const value = ENGINE.registeredVariables[name];\n      if (this.accumulatedGrads[i] == null) {\n        const trainable = false;\n        this.accumulatedGrads[i] = {\n          originalName: `${name}/accumulator`,\n          variable: tidy(\n              () => fill(value.shape, this.initialAccumulatorValue)\n                        .variable(trainable))\n        };\n      }\n\n      const gradient = Array.isArray(variableGradients) ?\n          variableGradients[i].tensor :\n          variableGradients[name];\n      if (gradient == null) {\n        return;\n      }\n\n      const accumulatedGrad = this.accumulatedGrads[i].variable;\n\n      tidy(() => {\n        const newAccumulatedGrad = add(accumulatedGrad, square(gradient));\n        accumulatedGrad.assign(newAccumulatedGrad);\n\n        const newValue = add(\n            mul(div(gradient,\n                    sqrt(add(newAccumulatedGrad, ENGINE.backend.epsilon()))),\n                -this.learningRate),\n            value);\n        value.assign(newValue);\n      });\n    });\n    this.incrementIterations();\n  }\n\n  dispose(): void {\n    if (this.accumulatedGrads != null) {\n      dispose(this.accumulatedGrads.map(v => v.variable));\n    }\n  }\n\n  async getWeights(): Promise<NamedTensor[]> {\n    // Order matters for Python compatibility.\n    return [await this.saveIterations()].concat(this.accumulatedGrads.map(\n        v => ({name: v.originalName, tensor: v.variable})));\n  }\n\n  async setWeights(weightValues: NamedTensor[]): Promise<void> {\n    weightValues = await this.extractIterations(weightValues);\n    const trainable = false;\n    this.accumulatedGrads = weightValues.map(\n        v => ({originalName: v.name, variable: v.tensor.variable(trainable)}));\n  }\n\n  getConfig(): ConfigDict {\n    return {\n      'learningRate': this.learningRate,\n      'initialAccumulatorValue': this.initialAccumulatorValue,\n    };\n  }\n\n  /** @nocollapse */\n  static fromConfig<T extends Serializable>(\n      cls: SerializableConstructor<T>, config: ConfigDict): T {\n    return new cls(config['learningRate'], config['initialAccumulatorValue']);\n  }\n}\nregisterClass(AdagradOptimizer);\n"},"lineCount":null}},"error":null,"hash":"da353bcbd6771603407f0ad34edf9d80","cacheData":{"env":{}}}